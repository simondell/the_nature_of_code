<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>A random walker and walker class</title>

	<style>
	canvas {
		border: 1px solid grey;
	}
	</style>
</head>
<body>
</body>

	<script src="random-0.26.js"></script>
	<script src="frames.js"></script>


	<script>
	(function( Frames, Random ){
		var canvasWidth = 640;
		var canvasHeight = 360;
		var context = null;

		// A Walker "class"
		function Walker(context, x, y) {
			this.context = context;
			this.x = x;
			this.y = y;
			this.stepSize = 0;
		}

		Walker.prototype.step = function () {
			var sigma = 4;
			var mu = 15;

			this.stepSize = Random.normal( mu, sigma );

			return this;
		}

		Walker.prototype.display = function () {
			var red = parseInt( Random.normal( 125, 70 ), 10 );
			var green = parseInt( Random.normal( 125, 70 ), 10 );
			var blue = parseInt( Random.normal( 125, 70 ), 10 );
			var choice = parseInt( Math.random() * 4, 10  );
			var new_x, new_y;

			switch( choice ) {
			case 0:
				new_x = this.x + this.stepSize;
				new_y = this.y;
				break;
			case 1:
				new_x = this.x - this.stepSize;
				new_y = this.y;
				break;
			case 2:
				new_x = this.x;
				new_y = this.y + this.stepSize;
				break;
			case 3:
				new_x = this.x;
				new_y = this.y - this.stepSize;
				break;
			}

			this.context.fillStyle = 'rgba('+ red +','+ green +','+ blue +',0.3 )';
			this.context.beginPath();
			this.context.arc( new_x, new_y, 8, 0, 2 * Math.PI );
			this.context.fill();

			this.x = new_x;
			this.y = new_y;

			return this;
		}

		function setup () {
			context = Frames.setupCanvas( canvasWidth, canvasHeight );
			walker = new Walker( context, context.canvas.width / 2, context.canvas.height / 2 );
		}

		function draw () {
			walker.step().display();
		}

		Frames.go( setup, draw );

	})( Frames, new Random() );
	</script>
</html>